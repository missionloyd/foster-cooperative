{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/Luke/Documents/dev/mern/foster-cooperative/layouts/DashboardLayout/GlobalSearchBar/GlobalSearchBar.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useReducer } from 'react';\nimport Popover from '@material-ui/core/Popover';\nimport SearchBar from './SearchBar';\nimport Item from './Item';\nimport Box from '@material-ui/core/Box'; // Initial State And Reducer Function\n\nconst initialState = {\n  isLoading: true,\n  data: [],\n  search: '',\n  searchData: []\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_DATA':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        data: action.payload,\n        isLoading: false\n      });\n\n    case 'SEARCH_INPUT':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        search: action.payload\n      });\n\n    case 'SEARCH_DATA':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        searchData: action.payload\n      });\n\n    default:\n      throw new Error();\n  }\n}; // The Component\n\n\nconst GlobalSearchBar = props => {\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, initialState);\n  const [anchorEl, setAnchorEl] = React.useState(null); // Async Fetch\n\n  const fetchData = async url => {\n    try {\n      const res = await fetch(url);\n      const data = await res.json();\n      dispatch({\n        type: 'SET_DATA',\n        payload: data\n      });\n    } catch (err) {\n      console.log('Error:', err);\n    }\n  };\n\n  useEffect(() => {\n    fetchData('https://jsonplaceholder.typicode.com/posts');\n  }, []); // Search And Highlight Function\n\n  const handleInput = e => {\n    let str = e.target.value;\n    dispatch({\n      type: 'SEARCH_INPUT',\n      payload: str\n    });\n    const newArr = state.data.filter(item => item.title.toLowerCase().includes(str.toLowerCase()) || item.body.toLowerCase().includes(str.toLowerCase())).map(item => {\n      let newTitle = item.title.replace(new RegExp(str, 'gi'), match => `<mark style=\"background: #2769AA; color: white;\">${match}</mark>`);\n      let newBody = item.body.replace(new RegExp(str, 'gi'), match => `<mark style=\"background: #2769AA; color: white;\">${match}</mark>`);\n      return _objectSpread(_objectSpread({}, item), {}, {\n        title: newTitle,\n        body: newBody\n      });\n    });\n    dispatch({\n      type: 'SEARCH_DATA',\n      payload: newArr\n    });\n    handleOpen(e);\n  };\n\n  const handleOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'popover' : undefined; // Return Statement\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      onInput: e => handleInput(e),\n      classes: props.classes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popover, {\n      id: id,\n      open: open //state.searchData > \"0\"\n      ,\n      hidden: !(state.search.length > 2),\n      disableAutoFocus: true,\n      onKeyDown: handleClose,\n      anchorEl: anchorEl,\n      style: {\n        marginTop: \"2.5rem\"\n      },\n      onClick: handleClose,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      transformOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        p: 1,\n        children: state.isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this) : state.search.length > 2 && state.searchData > \"0\" ? state.searchData.map(post => /*#__PURE__*/_jsxDEV(Item, {\n          user: post.userId,\n          title: post.title,\n          body: post.body\n        }, post.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)) : /*#__PURE__*/_jsxDEV(Item, {\n          user: \"System\",\n          title: \"No results Found...\"\n        }, id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 7\n  }, this);\n};\n\nexport default GlobalSearchBar;","map":{"version":3,"sources":["/Users/Luke/Documents/dev/mern/foster-cooperative/layouts/DashboardLayout/GlobalSearchBar/GlobalSearchBar.js"],"names":["React","useEffect","useReducer","Popover","SearchBar","Item","Box","initialState","isLoading","data","search","searchData","reducer","state","action","type","payload","Error","GlobalSearchBar","props","dispatch","anchorEl","setAnchorEl","useState","fetchData","url","res","fetch","json","err","console","log","handleInput","e","str","target","value","newArr","filter","item","title","toLowerCase","includes","body","map","newTitle","replace","RegExp","match","newBody","handleOpen","event","currentTarget","handleClose","open","Boolean","id","undefined","classes","length","marginTop","vertical","horizontal","post","userId"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from 'react';\nimport Popover from '@material-ui/core/Popover';\nimport SearchBar from './SearchBar';\nimport Item from './Item';\nimport Box from '@material-ui/core/Box';\n\n// Initial State And Reducer Function\nconst initialState = {\n  isLoading: true,\n  data: [],\n  search: '',\n  searchData: [],\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_DATA':\n      return {\n        ...state,\n        data: action.payload,\n        isLoading: false,\n      }\n    case 'SEARCH_INPUT':\n      return { ...state, search: action.payload }\n    case 'SEARCH_DATA':\n      return { ...state, searchData: action.payload }\n    default:\n      throw new Error()\n  }\n}\n\n// The Component\nconst GlobalSearchBar = (props) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  // Async Fetch\n  const fetchData = async url => {\n    try {\n      const res = await fetch(url)\n      const data = await res.json()\n      dispatch({ type: 'SET_DATA', payload: data })\n    } catch (err) {\n      console.log('Error:', err)\n    }\n  }\n\n  useEffect(() => {\n    fetchData('https://jsonplaceholder.typicode.com/posts')\n  }, [])\n\n  // Search And Highlight Function\n  const handleInput = e => {\n    let str = e.target.value\n    dispatch({ type: 'SEARCH_INPUT', payload: str })\n    const newArr = state.data\n      .filter(\n        item =>\n          item.title.toLowerCase().includes(str.toLowerCase()) ||\n          item.body.toLowerCase().includes(str.toLowerCase())\n      )\n      .map(item => {\n        let newTitle = item.title.replace(\n          new RegExp(str, 'gi'),\n          match =>\n            `<mark style=\"background: #2769AA; color: white;\">${match}</mark>`\n        )\n        let newBody = item.body.replace(\n          new RegExp(str, 'gi'),\n          match =>\n            `<mark style=\"background: #2769AA; color: white;\">${match}</mark>`\n        )\n        return {\n          ...item,\n          title: newTitle,\n          body: newBody,\n        }\n      })\n\n    dispatch({ type: 'SEARCH_DATA', payload: newArr })\n    handleOpen(e);\n  };\n\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'popover' : undefined;\n\n  // Return Statement\n  return (\n      <div>\n      <SearchBar onInput={e => handleInput(e)} classes={props.classes}/>\n      <Popover\n      id={id}\n      open={open} \n      //state.searchData > \"0\"\n      hidden={!(state.search.length > 2)}\n      disableAutoFocus\n      onKeyDown={handleClose}\n      anchorEl={anchorEl}\n      style={{marginTop: \"2.5rem\"}}\n      onClick={handleClose}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      transformOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}  \n    >\n      <Box p={1}>\n        {state.isLoading ? (\n          <p>Loading...</p>\n        ) : state.search.length > 2 && state.searchData > \"0\"? (\n          state.searchData.map(post => (\n            <Item\n              key={post.id}\n              user={post.userId}\n              title={post.title}\n              body={post.body}\n            />\n          ))\n        ) : (<Item\n            key={id}\n            user={\"System\"}\n            title={\"No results Found...\"}\n        />)}\n      </Box>\n    </Popover>\n    </div>\n  );\n}\n\nexport default GlobalSearchBar"]},"metadata":{},"sourceType":"module"}