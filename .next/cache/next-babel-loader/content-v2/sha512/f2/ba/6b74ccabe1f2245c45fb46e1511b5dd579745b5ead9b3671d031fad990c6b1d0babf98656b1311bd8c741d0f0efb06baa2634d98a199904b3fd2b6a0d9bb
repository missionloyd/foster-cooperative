{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/Luke/Documents/dev/mern/foster-cooperative/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Luke/Documents/dev/mern/foster-cooperative/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/Luke/Documents/dev/mern/foster-cooperative/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/Luke/Documents/dev/mern/foster-cooperative/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/Luke/Documents/dev/mern/foster-cooperative/layouts/DashboardLayout/GlobalSearchBar/GlobalSearchBar.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useReducer } from 'react';\nimport Popover from '@material-ui/core/Popover';\nimport SearchBar from './SearchBar';\nimport Item from './Item';\nimport Box from '@material-ui/core/Box'; // Initial State And Reducer Function\n\nvar initialState = {\n  isLoading: true,\n  data: [],\n  search: '',\n  searchData: []\n};\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'SET_DATA':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        data: action.payload,\n        isLoading: false\n      });\n\n    case 'SEARCH_INPUT':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        search: action.payload\n      });\n\n    case 'SEARCH_DATA':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        searchData: action.payload\n      });\n\n    default:\n      throw new Error();\n  }\n}; // The Component\n\n\nvar GlobalSearchBar = function GlobalSearchBar(props) {\n  _s();\n\n  var _useReducer = useReducer(reducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      anchorEl = _React$useState2[0],\n      setAnchorEl = _React$useState2[1]; // Async Fetch\n\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n      var res, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(url);\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              data = _context.sent;\n              dispatch({\n                type: 'SET_DATA',\n                payload: data\n              });\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log('Error:', _context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function fetchData(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchData('https://jsonplaceholder.typicode.com/posts');\n  }, []); // Search And Highlight Function\n\n  var handleInput = function handleInput(e) {\n    var str = e.target.value;\n    dispatch({\n      type: 'SEARCH_INPUT',\n      payload: str\n    });\n    var newArr = state.data.filter(function (item) {\n      return item.title.toLowerCase().includes(str.toLowerCase()) || item.body.toLowerCase().includes(str.toLowerCase());\n    }).map(function (item) {\n      var newTitle = item.title.replace(new RegExp(str, 'gi'), function (match) {\n        return \"<mark style=\\\"background: #2769AA; color: white;\\\">\".concat(match, \"</mark>\");\n      });\n      var newBody = item.body.replace(new RegExp(str, 'gi'), function (match) {\n        return \"<mark style=\\\"background: #2769AA; color: white;\\\">\".concat(match, \"</mark>\");\n      });\n      return _objectSpread(_objectSpread({}, item), {}, {\n        title: newTitle,\n        body: newBody\n      });\n    });\n    dispatch({\n      type: 'SEARCH_DATA',\n      payload: newArr\n    });\n    handleOpen(e);\n  };\n\n  var handleOpen = function handleOpen(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  var open = Boolean(anchorEl);\n  var id = open ? 'popover' : undefined; // Return Statement\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      onInput: function onInput(e) {\n        return handleInput(e);\n      },\n      classes: props.classes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Popover, {\n      id: id,\n      open: open //state.searchData > \"0\"\n      ,\n      hidden: !(state.search.length > 2),\n      disableAutoFocus: true,\n      onKeyDown: handleClose,\n      anchorEl: anchorEl,\n      style: {\n        marginTop: \"2.5rem\"\n      },\n      onClick: handleClose,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      transformOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        p: 1,\n        children: state.isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, _this) : state.search.length > 2 && state.searchData > \"0\" ? state.searchData.map(function (post) {\n          return /*#__PURE__*/_jsxDEV(Item, {\n            user: post.userId,\n            title: post.title,\n            body: post.body\n          }, post.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, _this);\n        }) : /*#__PURE__*/_jsxDEV(Item, {\n          user: \"System\",\n          title: \"No results Found...\"\n        }, id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 14\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 7\n  }, _this);\n};\n\n_s(GlobalSearchBar, \"vtmr87/7aom1lxqRHFU1MQgxPwg=\");\n\n_c = GlobalSearchBar;\nexport default GlobalSearchBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"GlobalSearchBar\");","map":{"version":3,"sources":["/Users/Luke/Documents/dev/mern/foster-cooperative/layouts/DashboardLayout/GlobalSearchBar/GlobalSearchBar.js"],"names":["React","useEffect","useReducer","Popover","SearchBar","Item","Box","initialState","isLoading","data","search","searchData","reducer","state","action","type","payload","Error","GlobalSearchBar","props","dispatch","useState","anchorEl","setAnchorEl","fetchData","url","fetch","res","json","console","log","handleInput","e","str","target","value","newArr","filter","item","title","toLowerCase","includes","body","map","newTitle","replace","RegExp","match","newBody","handleOpen","event","currentTarget","handleClose","open","Boolean","id","undefined","classes","length","marginTop","vertical","horizontal","post","userId"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,GAAP,MAAgB,uBAAhB,C,CAEA;;AACA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,SAAS,EAAE,IADQ;AAEnBC,EAAAA,IAAI,EAAE,EAFa;AAGnBC,EAAAA,MAAM,EAAE,EAHW;AAInBC,EAAAA,UAAU,EAAE;AAJO,CAArB;;AAOA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR,EAAmB;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,UAAL;AACE,6CACKF,KADL;AAEEJ,QAAAA,IAAI,EAAEK,MAAM,CAACE,OAFf;AAGER,QAAAA,SAAS,EAAE;AAHb;;AAKF,SAAK,cAAL;AACE,6CAAYK,KAAZ;AAAmBH,QAAAA,MAAM,EAAEI,MAAM,CAACE;AAAlC;;AACF,SAAK,aAAL;AACE,6CAAYH,KAAZ;AAAmBF,QAAAA,UAAU,EAAEG,MAAM,CAACE;AAAtC;;AACF;AACE,YAAM,IAAIC,KAAJ,EAAN;AAZJ;AAcD,CAfD,C,CAiBA;;;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AAAA;;AAAA,oBACPjB,UAAU,CAACU,OAAD,EAAUL,YAAV,CADH;AAAA,MAC1BM,KAD0B;AAAA,MACnBO,QADmB;;AAAA,wBAEDpB,KAAK,CAACqB,QAAN,CAAe,IAAf,CAFC;AAAA;AAAA,MAE1BC,QAF0B;AAAA,MAEhBC,WAFgB,wBAIjC;;;AACA,MAAMC,SAAS;AAAA,wEAAG,iBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEIC,KAAK,CAACD,GAAD,CAFT;;AAAA;AAERE,cAAAA,GAFQ;AAAA;AAAA,qBAGKA,GAAG,CAACC,IAAJ,EAHL;;AAAA;AAGRnB,cAAAA,IAHQ;AAIdW,cAAAA,QAAQ,CAAC;AAAEL,gBAAAA,IAAI,EAAE,UAAR;AAAoBC,gBAAAA,OAAO,EAAEP;AAA7B,eAAD,CAAR;AAJc;AAAA;;AAAA;AAAA;AAAA;AAMdoB,cAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AANc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATN,SAAS;AAAA;AAAA;AAAA,KAAf;;AAUAvB,EAAAA,SAAS,CAAC,YAAM;AACduB,IAAAA,SAAS,CAAC,4CAAD,CAAT;AACD,GAFQ,EAEN,EAFM,CAAT,CAfiC,CAmBjC;;AACA,MAAMO,WAAW,GAAG,SAAdA,WAAc,CAAAC,CAAC,EAAI;AACvB,QAAIC,GAAG,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAnB;AACAf,IAAAA,QAAQ,CAAC;AAAEL,MAAAA,IAAI,EAAE,cAAR;AAAwBC,MAAAA,OAAO,EAAEiB;AAAjC,KAAD,CAAR;AACA,QAAMG,MAAM,GAAGvB,KAAK,CAACJ,IAAN,CACZ4B,MADY,CAEX,UAAAC,IAAI;AAAA,aACFA,IAAI,CAACC,KAAL,CAAWC,WAAX,GAAyBC,QAAzB,CAAkCR,GAAG,CAACO,WAAJ,EAAlC,KACAF,IAAI,CAACI,IAAL,CAAUF,WAAV,GAAwBC,QAAxB,CAAiCR,GAAG,CAACO,WAAJ,EAAjC,CAFE;AAAA,KAFO,EAMZG,GANY,CAMR,UAAAL,IAAI,EAAI;AACX,UAAIM,QAAQ,GAAGN,IAAI,CAACC,KAAL,CAAWM,OAAX,CACb,IAAIC,MAAJ,CAAWb,GAAX,EAAgB,IAAhB,CADa,EAEb,UAAAc,KAAK;AAAA,4EACiDA,KADjD;AAAA,OAFQ,CAAf;AAKA,UAAIC,OAAO,GAAGV,IAAI,CAACI,IAAL,CAAUG,OAAV,CACZ,IAAIC,MAAJ,CAAWb,GAAX,EAAgB,IAAhB,CADY,EAEZ,UAAAc,KAAK;AAAA,4EACiDA,KADjD;AAAA,OAFO,CAAd;AAKA,6CACKT,IADL;AAEEC,QAAAA,KAAK,EAAEK,QAFT;AAGEF,QAAAA,IAAI,EAAEM;AAHR;AAKD,KAtBY,CAAf;AAwBA5B,IAAAA,QAAQ,CAAC;AAAEL,MAAAA,IAAI,EAAE,aAAR;AAAuBC,MAAAA,OAAO,EAAEoB;AAAhC,KAAD,CAAR;AACAa,IAAAA,UAAU,CAACjB,CAAD,CAAV;AACD,GA7BD;;AA+BA,MAAMiB,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;AAC5B3B,IAAAA,WAAW,CAAC2B,KAAK,CAACC,aAAP,CAAX;AACD,GAFD;;AAIA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB7B,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAFD;;AAIA,MAAM8B,IAAI,GAAGC,OAAO,CAAChC,QAAD,CAApB;AACA,MAAMiC,EAAE,GAAGF,IAAI,GAAG,SAAH,GAAeG,SAA9B,CA5DiC,CA8DjC;;AACA,sBACI;AAAA,4BACA,QAAC,SAAD;AAAW,MAAA,OAAO,EAAE,iBAAAxB,CAAC;AAAA,eAAID,WAAW,CAACC,CAAD,CAAf;AAAA,OAArB;AAAyC,MAAA,OAAO,EAAEb,KAAK,CAACsC;AAAxD;AAAA;AAAA;AAAA;AAAA,aADA,eAEA,QAAC,OAAD;AACA,MAAA,EAAE,EAAEF,EADJ;AAEA,MAAA,IAAI,EAAEF,IAFN,CAGA;AAHA;AAIA,MAAA,MAAM,EAAE,EAAExC,KAAK,CAACH,MAAN,CAAagD,MAAb,GAAsB,CAAxB,CAJR;AAKA,MAAA,gBAAgB,MALhB;AAMA,MAAA,SAAS,EAAEN,WANX;AAOA,MAAA,QAAQ,EAAE9B,QAPV;AAQA,MAAA,KAAK,EAAE;AAACqC,QAAAA,SAAS,EAAE;AAAZ,OARP;AASA,MAAA,OAAO,EAAEP,WATT;AAUA,MAAA,YAAY,EAAE;AACZQ,QAAAA,QAAQ,EAAE,QADE;AAEZC,QAAAA,UAAU,EAAE;AAFA,OAVd;AAcA,MAAA,eAAe,EAAE;AACfD,QAAAA,QAAQ,EAAE,QADK;AAEfC,QAAAA,UAAU,EAAE;AAFG,OAdjB;AAAA,6BAmBA,QAAC,GAAD;AAAK,QAAA,CAAC,EAAE,CAAR;AAAA,kBACGhD,KAAK,CAACL,SAAN,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,GAEGK,KAAK,CAACH,MAAN,CAAagD,MAAb,GAAsB,CAAtB,IAA2B7C,KAAK,CAACF,UAAN,GAAmB,GAA9C,GACFE,KAAK,CAACF,UAAN,CAAiBgC,GAAjB,CAAqB,UAAAmB,IAAI;AAAA,8BACvB,QAAC,IAAD;AAEE,YAAA,IAAI,EAAEA,IAAI,CAACC,MAFb;AAGE,YAAA,KAAK,EAAED,IAAI,CAACvB,KAHd;AAIE,YAAA,IAAI,EAAEuB,IAAI,CAACpB;AAJb,aACOoB,IAAI,CAACP,EADZ;AAAA;AAAA;AAAA;AAAA,mBADuB;AAAA,SAAzB,CADE,gBASC,QAAC,IAAD;AAED,UAAA,IAAI,EAAE,QAFL;AAGD,UAAA,KAAK,EAAE;AAHN,WACIA,EADJ;AAAA;AAAA;AAAA;AAAA;AAZP;AAAA;AAAA;AAAA;AAAA;AAnBA;AAAA;AAAA;AAAA;AAAA,aAFA;AAAA;AAAA;AAAA;AAAA;AAAA,WADJ;AA2CD,CA1GD;;GAAMrC,e;;KAAAA,e;AA4GN,eAAeA,eAAf","sourcesContent":["import React, { useEffect, useReducer } from 'react';\nimport Popover from '@material-ui/core/Popover';\nimport SearchBar from './SearchBar';\nimport Item from './Item';\nimport Box from '@material-ui/core/Box';\n\n// Initial State And Reducer Function\nconst initialState = {\n  isLoading: true,\n  data: [],\n  search: '',\n  searchData: [],\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_DATA':\n      return {\n        ...state,\n        data: action.payload,\n        isLoading: false,\n      }\n    case 'SEARCH_INPUT':\n      return { ...state, search: action.payload }\n    case 'SEARCH_DATA':\n      return { ...state, searchData: action.payload }\n    default:\n      throw new Error()\n  }\n}\n\n// The Component\nconst GlobalSearchBar = (props) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  // Async Fetch\n  const fetchData = async url => {\n    try {\n      const res = await fetch(url)\n      const data = await res.json()\n      dispatch({ type: 'SET_DATA', payload: data })\n    } catch (err) {\n      console.log('Error:', err)\n    }\n  }\n\n  useEffect(() => {\n    fetchData('https://jsonplaceholder.typicode.com/posts')\n  }, [])\n\n  // Search And Highlight Function\n  const handleInput = e => {\n    let str = e.target.value\n    dispatch({ type: 'SEARCH_INPUT', payload: str })\n    const newArr = state.data\n      .filter(\n        item =>\n          item.title.toLowerCase().includes(str.toLowerCase()) ||\n          item.body.toLowerCase().includes(str.toLowerCase())\n      )\n      .map(item => {\n        let newTitle = item.title.replace(\n          new RegExp(str, 'gi'),\n          match =>\n            `<mark style=\"background: #2769AA; color: white;\">${match}</mark>`\n        )\n        let newBody = item.body.replace(\n          new RegExp(str, 'gi'),\n          match =>\n            `<mark style=\"background: #2769AA; color: white;\">${match}</mark>`\n        )\n        return {\n          ...item,\n          title: newTitle,\n          body: newBody,\n        }\n      })\n\n    dispatch({ type: 'SEARCH_DATA', payload: newArr })\n    handleOpen(e);\n  };\n\n  const handleOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'popover' : undefined;\n\n  // Return Statement\n  return (\n      <div>\n      <SearchBar onInput={e => handleInput(e)} classes={props.classes}/>\n      <Popover\n      id={id}\n      open={open} \n      //state.searchData > \"0\"\n      hidden={!(state.search.length > 2)}\n      disableAutoFocus\n      onKeyDown={handleClose}\n      anchorEl={anchorEl}\n      style={{marginTop: \"2.5rem\"}}\n      onClick={handleClose}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      transformOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}  \n    >\n      <Box p={1}>\n        {state.isLoading ? (\n          <p>Loading...</p>\n        ) : state.search.length > 2 && state.searchData > \"0\"? (\n          state.searchData.map(post => (\n            <Item\n              key={post.id}\n              user={post.userId}\n              title={post.title}\n              body={post.body}\n            />\n          ))\n        ) : (<Item\n            key={id}\n            user={\"System\"}\n            title={\"No results Found...\"}\n        />)}\n      </Box>\n    </Popover>\n    </div>\n  );\n}\n\nexport default GlobalSearchBar"]},"metadata":{},"sourceType":"module"}